name: Sync to Hugging Face

on:
  push:
    branches: [ main ]

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
      with:
        fetch-depth: 0
        lfs: true
    
    - name: Push to Hugging Face
      env:
        HF_TOKEN: ${{ secrets.HF_TOKEN }}
      run: |
        # Rename main file for HF
        cp mltrainer_unified_chat.py app.py
        
        # Add HF Space as remote
        git remote add space https://HF_USERNAME:$HF_TOKEN@huggingface.co/spaces/HF_USERNAME/mltrainer3
        
        # Push to HF
        git push space main:main --force
